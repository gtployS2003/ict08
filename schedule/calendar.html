<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/ict8/assets/image/logo_หน่วย8.png">
    <title>ปฏิทินงาน</title>

    <link rel="stylesheet" href="/ict8/assets/css/device.css"/>
    

    <!-- include head -->
    <script src="/ict8/assets/js/include.js" defer></script>
    <script src="/ict8/assets/js/auth.js" defer></script>
    <script src="/ict8/assets/js/main.js" defer></script>
    <script src="/ict8/backend/public/config.js.php" defer></script>
    <script src="/ict8/assets/js/api/http.js" defer></script>
    <!-- FullCalendar -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js" defer></script>
    <!-- JS สำหรับหน้าปฏิทิน -->
    <script src="/ict8/assets/js/schedule-calendar.js" defer></script>

</head>

<body>

    <div id="header-index"></div>
    <div id="schedule-nav"></div>

    <main class="main schedule-main">
        <div class="schedule-layout">
            <!-- SIDEBAR -->
            <aside class="schedule-sidebar">
                <!-- งานวันนี้ -->
                <section class="sidebar-section">
                    <h3 class="sidebar-title">งานวันนี้ (<span id="today-count">0</span>)</h3>
                    <p class="sidebar-date" id="sidebar-today-label"></p>
                    <div id="today-task-list" class="sidebar-list">
                        <!-- JS จะมาใส่รายการงานวันนี้ตรงนี้ -->
                    </div>
                </section>

                <!-- งานรอการอนุมัติ -->
                <section class="sidebar-section">
                    <h3 class="sidebar-title">งานที่รอการอนุมัติ (<span id="pending-count">0</span>)</h3>
                    <div id="pending-task-list" class="sidebar-list">
                        <!-- JS จะมาใส่รายการงานสถานะ "รอการตรวจสอบ" ตรงนี้ -->
                    </div>
                </section>
            </aside>

            <!-- ส่วนปฏิทิน -->
            <section class="schedule-calendar">
                <div class="schedule-calendar-header toolbar-row">
                    <!-- ซ้าย: เดือน / ปี -->
                    <div class="toolbar-left">
                        <h2 class="calendar-month" id="calendar-month"></h2>
                    </div>

                    <!-- ขวา: ปุ่มควบคุมปฏิทิน และ ปุ่มเพิ่มงาน / ตัวกรอง / ค้นหา -->
                    <div class="toolbar-right-scheduler">
                        <!-- ควบคุมปฏิทิน-->
                        <div id="calendar-toolbar" class="calendar-toolbar">
                            <button type="button" id="calendar-prev" class="calendar-btn">&lt;</button>
                            <button type="button" id="calendar-today" class="calendar-btn">วันนี้</button>
                            <button type="button" id="calendar-next" class="calendar-btn">&gt;</button>
                        </div>

                        <!--เพิ่มงาน -->
                        <button id="schedule-add-task-toggle" class="add-task">
                            <i class="fa-solid fa-plus"></i>
                        </button>

                        <!-- ค้นหา -->
                        <div class="schedule-search">
                            <input type="text" id="schedule-search-input" placeholder="ค้นหา">
                            <button id="schedule-search-clear" class="schedule-search-clear">x</button>
                        </div>
                    </div>
                </div>

                <!-- ตัวปฏิทินจริง -->
                <div id="calendar"></div>
            </section>
        </div>

        <!-- POPUP เพิ่มงาน (ภายในหน่วยงาน) -->
        <div class="task-add-overlay" id="task-add-overlay">
            <div class="task-add-modal">
                <div class="task-add-header">
                    <h3 class="task-add-title">เพิ่มงาน (ภายในหน่วยงาน)</h3>
                    <button type="button" class="task-add-close" id="task-add-close-top">×</button>
                </div>

                <form id="task-add-form" class="task-add-body">
                    <!-- ชื่องาน -->
                    <div class="task-add-row">
                        <label for="add-title">ชื่องาน</label>
                        <input type="text" id="add-title" name="title" required>
                    </div>

                    <!-- รายละเอียด -->
                    <div class="task-add-row">
                        <label for="add-desc">รายละเอียดงาน</label>
                        <textarea id="add-desc" name="detail" rows="3"></textarea>
                    </div>

                    <!-- ตำแหน่งที่ตั้ง + จังหวัด -->
                    <div class="task-add-row task-add-row-2col">
                        <div class="location">
                            <label for="add-location">ตำแหน่งที่ตั้ง</label>
                            <input type="text" id="add-location" name="location">
                        </div>
                        <div class="province">
                            <label for="add-province">จังหวัด</label>
                            <select id="add-province" name="province_id" required>
                                <option value="">-- เลือกจังหวัด --</option>
                            </select>
                        </div>
                    </div>

                    <!-- ผู้เข้าร่วม -->
                    <div class="task-add-row">
                        <label>ผู้เข้าร่วมงาน (เลือกได้หลายคน)</label>
                        <div class="participant-grid" id="add-participant-grid">
                            <!-- JS จะมาใส่รายการผู้เข้าร่วมตรงนี้ -->
                        </div>
                    </div>

                    <!-- ลิงค์เข้าประชุม -->
                    <div class="task-add-row">
                        <label for="add-meeting-link">ลิงค์เข้าประชุม</label>
                        <input type="url" id="add-meeting-link" name="meeting_link" placeholder="https://...">
                    </div>

                    <!-- หมายเหตุ -->
                    <div class="task-add-row">
                        <label for="add-note">หมายเหตุ</label>
                        <textarea id="add-note" name="note" rows="2"></textarea>
                    </div>

                    <!-- วันที่เริ่มต้น / สิ้นสุด -->
                    <div class="task-add-row task-add-row-2col">
                        <div class="start-date">
                            <label for="add-start-date">วันที่เริ่มต้น</label>
                            <input type="date" id="add-start-date" name="start_date" required>
                        </div>
                        <div class="end-date">
                            <label for="add-end-date">วันที่สิ้นสุด</label>
                            <input type="date" id="add-end-date" name="end_date" required>
                        </div>
                    </div>


                </form>

                <div class="task-add-footer">
                    <button type="button" class="task-add-cancel task-add-close">ยกเลิก</button>
                    <button type="submit" class="task-add-save" form="task-add-form">บันทึกงาน</button>
                </div>
            </div>
        </div>



    </main>

    <div id="footer-index"></div>

</body>

</html>